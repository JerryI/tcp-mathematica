(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      8422,        211]
NotebookOptionsPosition[      7359,        186]
NotebookOutlinePosition[      7826,        203]
CellTagsIndexPosition[      7783,        200]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"SetDirectory", "[", 
    RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], " "}], "\n", 
 RowBox[{"<<", "JTP`"}]}], "Code",ExpressionUUID->"5c0ac8d6-df1c-4ba2-ac00-\
8cf4ea0d4c28"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"obj", "=", 
  RowBox[{
   RowBox[{"JTPServer", "[", 
    RowBox[{"\"\<port\>\"", "->", "257"}], "]"}], "//", 
   "JTPServerStart"}]}]], "Code",
 CellLabel->"In[3]:=",ExpressionUUID->"912d0eca-dd69-4b79-93ee-72c5c96b8f7f"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["JTPServer",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"]], 
              ButtonFunction :> (Typeset`open$$ = True), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], "", 
            GridBox[{{
               RowBox[{
                 TagBox["\"port: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["257", "SummaryItem"]}], "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"host: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"127.0.0.1\"", "SummaryItem"]}], 
               "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"status: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"started\"", "SummaryItem"]}], "\[SpanFromLeft]"}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              ButtonFunction :> (Typeset`open$$ = False), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], "", 
            GridBox[{{
               RowBox[{
                 TagBox["\"port: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["257", "SummaryItem"]}], "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"host: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"127.0.0.1\"", "SummaryItem"]}], 
               "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"status: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["\"started\"", "SummaryItem"]}], "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"kernels: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"{", "Evaluate", "}"}], "SummaryItem"]}], 
               "\[SpanFromLeft]"}, {
               RowBox[{
                 TagBox["\"self: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["JTP`Objects`Server$11", "SummaryItem"]}], 
               "\[SpanFromLeft]"}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  JTP`JTPServer[JTP`Objects`Server$11],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellLabel->"Out[3]=",ExpressionUUID->"4dc1c960-fd39-4e1d-8eaa-45b1f20057f9"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"obj", "[", "\"\<log\>\"", "]"}], "[", "\"\<Elements\>\"", "]"}], 
   "//", "TableForm"}], "//", "Dynamic"}]], "Input",
 InitializationCell->True,
 CellLabel->"In[9]:=",ExpressionUUID->"ef8ee62d-9476-473b-b39d-e15b3ce9e88b"],

Cell["Test client", "Text",ExpressionUUID->"eef9990d-5a5b-459e-ac55-d137b084a7aa"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$ip", "=", "\"\<127.0.0.1:257\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$cli", "=", 
   RowBox[{"SocketConnect", "[", 
    RowBox[{"$ip", ",", "\"\<TCP\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]"}], "Input",
 InitializationCell->True,
 CellLabel->"In[4]:=",ExpressionUUID->"20dc8283-53cd-47d3-912e-13c33938e8d3"],

Cell[BoxData[
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"data", "=", 
     RowBox[{"Now", "//", "BinarySerialize"}]}], "}"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"BinaryWrite", "[", 
     RowBox[{"$cli", ",", 
      RowBox[{"ExportByteArray", "[", 
       RowBox[{
        RowBox[{"Length", "[", "data", "]"}], ",", 
        "\"\<UnsignedInteger32\>\""}], "]"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"BinaryWrite", "[", 
     RowBox[{"$cli", ",", "data"}], "]"}], ";"}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",ExpressionUUID->"681cc068-ac49-4566-9ae5-d77b3922a730"]
},
WindowSize->{958.1999999999999, 568.8},
WindowMargins->{{Automatic, 90.60000000000014}, {Automatic, 0.6}},
TrackCellChangeTimes->False,
FrontEndVersion->"13.0 for Microsoft Windows (64-bit) (February 4, 2022)",
StyleDefinitions->"ReverseColor.nb",
ExpressionUUID->"1f3e5c21-f3cc-414a-86dc-62ac5770c605"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 233, 6, 68, "Code",ExpressionUUID->"5c0ac8d6-df1c-4ba2-ac00-8cf4ea0d4c28"],
Cell[CellGroupData[{
Cell[816, 30, 245, 6, 50, "Code",ExpressionUUID->"912d0eca-dd69-4b79-93ee-72c5c96b8f7f"],
Cell[1064, 38, 4861, 102, 79, "Output",ExpressionUUID->"4dc1c960-fd39-4e1d-8eaa-45b1f20057f9"]
}, Open  ]],
Cell[5940, 143, 283, 7, 59, "Input",ExpressionUUID->"ef8ee62d-9476-473b-b39d-e15b3ce9e88b",
 InitializationCell->True],
Cell[6226, 152, 82, 0, 38, "Text",ExpressionUUID->"eef9990d-5a5b-459e-ac55-d137b084a7aa"],
Cell[6311, 154, 411, 11, 118, "Input",ExpressionUUID->"20dc8283-53cd-47d3-912e-13c33938e8d3",
 InitializationCell->True],
Cell[6725, 167, 630, 17, 135, "Input",ExpressionUUID->"681cc068-ac49-4566-9ae5-d77b3922a730"]
}
]
*)

